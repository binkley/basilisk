CREATE SCHEMA IF NOT EXISTS FLORA;

CREATE TABLE IF NOT EXISTS FLORA.CHEF
(
  id          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  received_at TIMESTAMP DEFAULT NOW(),
  code        VARCHAR NOT NULL UNIQUE,
  name        VARCHAR NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS FLORA.RECIPE
(
  id          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  received_at TIMESTAMP DEFAULT NOW(),
  name        VARCHAR NOT NULL UNIQUE,
  chef_code   VARCHAR REFERENCES FLORA.CHEF (code) -- TODO: NOT NULL
);

CREATE TABLE IF NOT EXISTS FLORA.INGREDIENT
(
  id          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  received_at TIMESTAMP DEFAULT NOW(),
  name        VARCHAR NOT NULL UNIQUE,
  chef_code   VARCHAR REFERENCES FLORA.CHEF (code), -- TODO: NOT NULL
  recipe_id   BIGINT REFERENCES FLORA.RECIPE (id)
);
